# Introduction to Markets

## 中心化交易所
本书中，我们将构建一个运行在以太坊上的去中心化交易所（DEX）。交易所的设计方法多种多样。所有中心化交易所的核心都是订单簿。订单簿本质上是一个日志，记录了交易者想要发出的所有买卖订单。订单簿中的每个订单都包含成交价格和买卖数量。

![Order book example](images/orderbook.png)

交易的发生必须有流动性，流动性指的是市场上可供交易的资产数量。如果你想买一个衣柜，但没人卖，那就没有流动性。如果你想卖一个衣柜，但没人想买，那就有流动性，但没有买家。如果没有流动性，那就无物可买，也无物可卖。

在中心化交易所中，订单簿是流动性的积累场所。如果有人下卖单，他们就为市场提供了流动性。如果有人下买单，他们就期望市场有足够的流动性，否则交易就无法进行。

当市场流动性不足，但交易需求依然旺盛时，做市商就发挥作用了。做市商是指为市场提供流动性的公司或个人，他们通常拥有大量资金，买入各种资产并在交易所出售。交易所会为此向做市商支付报酬。做市商通过向交易所提供流动性来获利。

## DEX

不必惊讶，去中心化交易所也需要流动性。它们也需要有人为各种资产的交易者提供流动性。然而，这个过程无法以中心化的方式完成。必须找到一种去中心化的解决方案。目前存在多种去中心化解决方案，它们的实现方式各不相同。我们将重点关注 Uniswap 如何解决这个问题。

## AMM

链上市场的演进催生了自动做市商（AMM）的概念。顾名思义，这种算法的工作原理与做市商完全相同，但它是自动化的。此外，它是去中心化且无需许可的，也就是说：
* 它不受单一实体控制； 
* 所有资产并非集中存储于一处； 
* 任何人都可以从任何地方使用它。

### AMM是什么？

AMM（自动做市商）是一组智能合约，用于定义流动性的管理方式。每个交易对（例如 ETH/USDC）都是一个独立的合约，其中存储着 ETH 和 USDC，并被编程为居间交易：将 ETH 兑换成 USDC，反之亦然。

其核心思想是流动性池：每个合约都是一个流动性池，用于存储流动性，并允许不同的用户（包括其他智能合约）以无需许可的方式进行交易。存在两种角色：流动性提供者和交易者，这两种角色通过流动性池进行交互，而他们与流动性池的交互方式是预先编程且不可更改的。

![Automated Market Maker simplified](images/amm_simplified.png)

这种方式与中心化交易所的不同之处在于，智能合约完全自动化，不受任何人管理。没有经理、管理员、特权用户等等。只有流动性提供者和交易者（他们可以是同一人），所有算法都是预先编程好的，不可篡改且公开的。

现在让我们更仔细地看看 Uniswap 是如何实现 AMM 的。

> 请注意，我在本书中交替使用 pool 和 pair 这两个术语，因为 Uniswap 池是两个代币的组合。

>如果您有任何疑问，欢迎在[本里程碑的 GitHub Discussion](https://github.com/Jeiwan/uniswapv3-book/discussions/categories/milestone-0-introduction)!提出！
